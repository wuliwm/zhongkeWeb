import"./button-DUk0u3m-.js";import{d as B,r as I,v as $,I as N,ba as j,c as R,F as q,f as C,i as F,w as H,E as V,M as z,j as S,bi as U,o as A,k as G}from"./index-C46IBHsc.js";import{a as D}from"./StatusTag-BmSEEcUz.js";import{g as J}from"./_commonjsHelpers-Cpj98o6Y.js";var m={exports:{}},K=m.exports,E;function L(){return E||(E=1,(function(p,M){(function(r,o){p.exports=o()})(K,(function(){return function(r,o,u){r=r||{};var t=o.prototype,f={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function n(e,a,d,v){return t.fromToBase(e,a,d,v)}u.en.relativeTime=f,t.fromToBase=function(e,a,d,v,b){for(var x,c,g,T=d.$locale().relativeTime||f,_=r.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],k=_.length,l=0;l<k;l+=1){var s=_[l];s.d&&(x=v?u(e).diff(d,s.d,!0):d.diff(e,s.d,!0));var i=(r.rounding||Math.round)(Math.abs(x));if(g=x>0,i<=s.r||!s.r){i<=1&&l>0&&(s=_[l-1]);var y=T[s.l];b&&(i=b(""+i)),c=typeof y=="string"?y.replace("%d",i):y(i,a,s.l,g);break}}if(a)return c;var w=g?T.future:T.past;return typeof w=="function"?w(c):w.replace("%s",c)},t.to=function(e,a){return n(e,a,this,!0)},t.from=function(e,a){return n(e,a,this)};var h=function(e){return e.$u?u.utc():u()};t.toNow=function(e){return this.to(h(this),e)},t.fromNow=function(e){return this.from(h(this),e)}}}))})(m)),m.exports}var O=L();const P=J(O),Q=B({__name:"CountdownTimer",props:{endDate:{}},setup(p){D.extend(P);const M=p,r=I(Date.now());let o=null;const u=$(()=>{const t=D(M.endDate);if(t.isBefore(r.value))return{text:"已过期",urgent:!0};const n=t.diff(r.value,"day");return n<=0?t.diff(r.value,"hour")<=0?{text:"即将截止",urgent:!0}:{text:"今天截止",urgent:!0}:n===1?{text:"明天截止",urgent:!0}:{text:`还剩 ${n} 天`,urgent:n<=3}});return N(()=>{o=globalThis.setInterval(()=>{r.value=Date.now()},60*1e3)}),j(()=>{o&&(globalThis.clearInterval(o),o=null)}),(t,f)=>{const n=V;return A(),R("span",{class:q(["countdown",{urgent:u.value.urgent}])},[C(n,null,{default:H(()=>[C(S(U))]),_:1}),F(" "+z(u.value.text),1)],2)}}}),ee=G(Q,[["__scopeId","data-v-b38794eb"]]);export{ee as C};
